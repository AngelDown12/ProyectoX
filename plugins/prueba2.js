import { createInterface } from 'readline'
import { stdout, stdin } from 'process'

const rl = createInterface({ input: stdin, output: stdout })

let handler = async (m, { conn }) => {
    rl.on('line', (line) => {
        if (line.includes('messageStubType: 26') && line.includes('GROUP_CHANGE_ANNOUNCE')) {
            const isOn = line.includes("'on'")
            const user = `@${m.sender.split('@')[0]}`
            
            conn.sendMessage(m.chat, {
                text: isOn ? 
                    `*âš ï¸ ğ˜¾ğ™Šğ™‰ğ™ğ™„ğ™‚ğ™ğ™ğ˜¼ğ˜¾ğ™„ğ™Šğ™‰ ğ˜¿ğ™€ğ™‡ ğ™‚ğ™ğ™ğ™‹ğ™Š âš ï¸*\n\n*ğ™€ğ™¡ ğ™–ğ™™ğ™¢ğ™ğ™£ğ™ğ™¨ğ™©ğ™§ğ™–ğ™™ğ™¤ğ™§ ${user} ğ™ğ™– ğ™–ğ™˜ğ™©ğ™ğ™«ğ™–ğ™™ğ™¤ ğ™šğ™¡ ğ™¢ğ™¤ğ™™ğ™¤ "ğ™ğ™¤ğ™¡ğ™¤ ğ™–ğ™™ğ™¢ğ™ğ™£ğ™ğ™¨ğ™©ğ™§ğ™–ğ™™ğ™¤ğ™§ğ™šğ™¨"* ğŸ”’\n\n*ğ˜¼ğ™ğ™¤ğ™§ğ™– ğ™¨ğ™¤ğ™¡ğ™¤ ğ™¡ğ™¤ğ™¨ ğ™–ğ™™ğ™¢ğ™ğ™£ğ™ğ™¨ğ™©ğ™§ğ™–ğ™™ğ™¤ğ™§ğ™šğ™¨ ğ™¥ğ™ªğ™šğ™™ğ™šğ™£ ğ™šğ™£ğ™«ğ™ğ™–ğ™§ ğ™¢ğ™šğ™£ğ™¨ğ™–ğ™Ÿğ™šğ™¨ ğ™–ğ™¡ ğ™œğ™§ğ™ªğ™¥ğ™¤.*` :
                    `*âš ï¸ ğ˜¾ğ™Šğ™‰ğ™ğ™„ğ™‚ğ™ğ™ğ˜¼ğ˜¾ğ™„ğ™Šğ™‰ ğ˜¿ğ™€ğ™‡ ğ™‚ğ™ğ™ğ™‹ğ™Š âš ï¸*\n\n*ğ™€ğ™¡ ğ™–ğ™™ğ™¢ğ™ğ™£ğ™ğ™¨ğ™©ğ™§ğ™–ğ™™ğ™¤ğ™§ ${user} ğ™ğ™– ğ™™ğ™šğ™¨ğ™–ğ™˜ğ™©ğ™ğ™«ğ™–ğ™™ğ™¤ ğ™šğ™¡ ğ™¢ğ™¤ğ™™ğ™¤ "ğ™ğ™¤ğ™¡ğ™¤ ğ™–ğ™™ğ™¢ğ™ğ™£ğ™ğ™¨ğ™©ğ™§ğ™–ğ™™ğ™¤ğ™§ğ™šğ™¨"* ğŸ”“\n\n*ğ˜¼ğ™ğ™¤ğ™§ğ™– ğ™©ğ™¤ğ™™ğ™¤ğ™¨ ğ™¡ğ™¤ğ™¨ ğ™¥ğ™–ğ™§ğ™©ğ™ğ™˜ğ™ğ™¥ğ™–ğ™£ğ™©ğ™šğ™¨ ğ™¥ğ™ªğ™šğ™™ğ™šğ™£ ğ™šğ™£ğ™«ğ™ğ™–ğ™§ ğ™¢ğ™šğ™£ğ™¨ğ™–ğ™Ÿğ™šğ™¨ ğ™–ğ™¡ ğ™œğ™§ğ™ªğ™¥ğ™¤.*`,
                mentions: [m.sender]
            })
        }
    })
}

handler.help = ['Detector de cambios en el grupo']
handler.tags = ['group']
handler.group = true

export default handler 
